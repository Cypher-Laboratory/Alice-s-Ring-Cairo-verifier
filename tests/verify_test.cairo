use alices_ring_cairo_verifier::structType::{RingSignature, GaragaMSMParam};
use garaga::ec_ops::{G1Point, FunctionFelt, u384, msm_g1, MSMHint, DerivePointFromXHint};

#[test]
fn test_verify() -> bool {
    let msm_hint = MSMHint {
        Q_low: G1Point {
            x: u384 {
                limb0: 30508105517743614498243917742,
                limb1: 42404398606527405234535181336,
                limb2: 109843433197369770,
                limb3: 0
            },
            y: u384 {
                limb0: 2077934176451262212382749518,
                limb1: 42086603697619280324644581228,
                limb2: 1696150537526180996,
                limb3: 0
            }
        },
        Q_high: G1Point {
            x: u384 {
                limb0: 26368288237955756269526568895,
                limb1: 13043143704225957005610978096,
                limb2: 586211446676112530,
                limb3: 0
            },
            y: u384 {
                limb0: 33540164725112913683274917493,
                limb1: 70196092127397136185313858143,
                limb2: 4673085037891810068,
                limb3: 0
            }
        },
        Q_high_shifted: G1Point {
            x: u384 {
                limb0: 35202440360358707598274151868,
                limb1: 48520498171641809710205294096,
                limb2: 7868568474580333411,
                limb3: 0
            },
            y: u384 {
                limb0: 59236509598723348397140526235,
                limb1: 66035277716178047912166002795,
                limb2: 7988621896045376426,
                limb3: 0
            }
        },
        SumDlogDivLow: FunctionFelt {
            a_num: array![
                u384 {
                    limb0: 30789938499663706262831079130,
                    limb1: 6402103094007397188599460519,
                    limb2: 7243393512159769729,
                    limb3: 0
                },
                u384 {
                    limb0: 73216244804212951636925703687,
                    limb1: 48520594767428323695334991809,
                    limb2: 4328903209021054482,
                    limb3: 0
                },
                u384 {
                    limb0: 16005290336230269886893578007,
                    limb1: 79228162514264337591097109436,
                    limb2: 9223372036854775807,
                    limb3: 0
                }
            ]
                .span(),
            a_den: array![
                u384 {
                    limb0: 32686918336137166625080542956,
                    limb1: 71615171900973121499409257908,
                    limb2: 1248338173687436560,
                    limb3: 0
                },
                u384 {
                    limb0: 22028374805910366764302901692,
                    limb1: 10446978131287648529059261286,
                    limb2: 3920823322887395573,
                    limb3: 0
                },
                u384 {
                    limb0: 35479360611782112814714481724,
                    limb1: 61954188192162867927251095220,
                    limb2: 2332670667280973044,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span(),
            b_num: array![
                u384 {
                    limb0: 12028407082765728876256654142,
                    limb1: 26563288012491263899175254519,
                    limb2: 7557673032047806204,
                    limb3: 0
                },
                u384 {
                    limb0: 8125986961296804052510924388,
                    limb1: 33211095567529197025324285534,
                    limb2: 8953818608009237075,
                    limb3: 0
                },
                u384 {
                    limb0: 1572509260795375529995599759,
                    limb1: 11271550114358640846947889507,
                    limb2: 2980817628797442696,
                    limb3: 0
                },
                u384 {
                    limb0: 15133535200594907621194740839,
                    limb1: 15916779723451217377914055597,
                    limb2: 4206378332422128717,
                    limb3: 0
                }
            ]
                .span(),
            b_den: array![
                u384 {
                    limb0: 27085642591673663495755594852,
                    limb1: 22739468103545805176125187985,
                    limb2: 221150192891396983,
                    limb3: 0
                },
                u384 {
                    limb0: 61641843160607504008669328195,
                    limb1: 5199826913113294843796689730,
                    limb2: 952916954951214647,
                    limb3: 0
                },
                u384 {
                    limb0: 18326934032334593793645544216,
                    limb1: 33020927354198244708480773135,
                    limb2: 1388490226704750140,
                    limb3: 0
                },
                u384 {
                    limb0: 7569655244620515900494957613,
                    limb1: 67998443473771412357253967668,
                    limb2: 3341968708536819962,
                    limb3: 0
                },
                u384 {
                    limb0: 25941870592166948985251608828,
                    limb1: 25795354190585960565305401795,
                    limb2: 1420952604761839579,
                    limb3: 0
                },
                u384 {
                    limb0: 35479360611782112814714481724,
                    limb1: 61954188192162867927251095220,
                    limb2: 2332670667280973044,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span()
        },
        SumDlogDivHigh: FunctionFelt {
            a_num: array![
                u384 {
                    limb0: 22648496047290694558023826838,
                    limb1: 20389205794901440949999638444,
                    limb2: 2521602370191748130,
                    limb3: 0
                },
                u384 {
                    limb0: 37089662360438699651804890021,
                    limb1: 35209587294328036364300592386,
                    limb2: 1345646371426018710,
                    limb3: 0
                },
                u384 {
                    limb0: 30003718829236970830476447906,
                    limb1: 169580172,
                    limb2: 4611686018427387904,
                    limb3: 0
                }
            ]
                .span(),
            a_den: array![
                u384 {
                    limb0: 64273402779688249881058364071,
                    limb1: 64811598014450805167513633596,
                    limb2: 2992824029609988360,
                    limb3: 0
                },
                u384 {
                    limb0: 50361442297084728603066208002,
                    limb1: 69110048983271762884004944487,
                    limb2: 8638695540603975925,
                    limb3: 0
                },
                u384 {
                    limb0: 39619177891569971043431830571,
                    limb1: 12087280580199978562631348124,
                    limb2: 1856302653802230285,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span(),
            b_num: array![
                u384 {
                    limb0: 76803389141113076349980551317,
                    limb1: 31509387752212511837835771900,
                    limb2: 6480484323988590080,
                    limb3: 0
                },
                u384 {
                    limb0: 28270273190393633397664764194,
                    limb1: 34589662721758035851089335297,
                    limb2: 5422418250442072630,
                    limb3: 0
                },
                u384 {
                    limb0: 13320507197104787334968531336,
                    limb1: 10539711449654346681020523830,
                    limb2: 7414452004862541496,
                    limb3: 0
                },
                u384 {
                    limb0: 49200047827946033752434081693,
                    limb1: 4083250697884461727312079798,
                    limb2: 2920966473013263004,
                    limb3: 0
                }
            ]
                .span(),
            b_den: array![
                u384 {
                    limb0: 3469619248190117089601696865,
                    limb1: 37611084259690320023821529303,
                    limb2: 4606834936293787289,
                    limb3: 0
                },
                u384 {
                    limb0: 68019720431382925276443625060,
                    limb1: 6779355596611601471415035636,
                    limb2: 9128779599875276528,
                    limb3: 0
                },
                u384 {
                    limb0: 9167892845935910959126959546,
                    limb1: 45925008852960956005537213696,
                    limb2: 2030044749358131809,
                    limb3: 0
                },
                u384 {
                    limb0: 25282346449058117719866631833,
                    limb1: 78195072258724569643966478189,
                    limb2: 3906974796003945722,
                    limb3: 0
                },
                u384 {
                    limb0: 54274938083341310824014915138,
                    limb1: 5230262528305737326707134660,
                    limb2: 6138824822478419932,
                    limb3: 0
                },
                u384 {
                    limb0: 39619177891569971043431830571,
                    limb1: 12087280580199978562631348124,
                    limb2: 1856302653802230285,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span()
        },
        SumDlogDivHighShifted: FunctionFelt {
            a_num: array![
                u384 {
                    limb0: 39402518246184984699703960253,
                    limb1: 78583798470802330091366312989,
                    limb2: 8822314997217837663,
                    limb3: 0
                },
                u384 {
                    limb0: 66699653886105450062268737116,
                    limb1: 79228162514264337591329834387,
                    limb2: 4611686018427387903,
                    limb3: 0
                }
            ]
                .span(),
            a_den: array![
                u384 {
                    limb0: 59592540431680546904667946372,
                    limb1: 9378137657710089923176985256,
                    limb2: 7237240380882637677,
                    limb3: 0
                },
                u384 {
                    limb0: 17657433915949873725743229554,
                    limb1: 17664520638396570877727678143,
                    limb2: 768592115598329866,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span(),
            b_num: array![
                u384 {
                    limb0: 13929819207197478745146942354,
                    limb1: 77043425273882687422111480858,
                    limb2: 1101383388536487646,
                    limb3: 0
                },
                u384 {
                    limb0: 74829609287406378570404015600,
                    limb1: 27704370223629839090752021333,
                    limb2: 5693716525278884445,
                    limb3: 0
                },
                u384 {
                    limb0: 17967408119048023096740456806,
                    limb1: 64800676380522481979683138754,
                    limb2: 934980100425654998,
                    limb3: 0
                }
            ]
                .span(),
            b_den: array![
                u384 {
                    limb0: 54812188189083226786045429300,
                    limb1: 20745843679214758408452180738,
                    limb2: 6410183721446152759,
                    limb3: 0
                },
                u384 {
                    limb0: 40660226372192749388562012070,
                    limb1: 52027177990645320431765977704,
                    limb2: 6552784705140839157,
                    limb3: 0
                },
                u384 {
                    limb0: 24118840086659489524312618340,
                    limb1: 7808825856471521147104423748,
                    limb2: 4805081976574037078,
                    limb3: 0
                },
                u384 {
                    limb0: 63506036217937129125616653508,
                    limb1: 24726513717008401959423125765,
                    limb2: 4737369662757081683,
                    limb3: 0
                },
                u384 {
                    limb0: 17657433915949873725743229554,
                    limb1: 17664520638396570877727678143,
                    limb2: 768592115598329866,
                    limb3: 0
                },
                u384 { limb0: 1, limb1: 0, limb2: 0, limb3: 0 }
            ]
                .span()
        }
    };

    let derive_point_from_x_hint = DerivePointFromXHint {
        y_last_attempt: u384 {
            limb0: 19143422988414174028726312232,
            limb1: 17711161399028318519118464239,
            limb2: 352005243735063687,
            limb3: 0
        },
        g_rhs_sqrt: array![].span()
    };

    let points = array![
        G1Point {
            x: u384 {
                limb0: 4141159361002348047412948789,
                limb1: 74290375893859608933173379039,
                limb2: 3060439006785045305,
                limb3: 0
            },
            y: u384 {
                limb0: 39750923145030191848243338516,
                limb1: 58889476195570982301195030625,
                limb2: 3010168879744655918,
                limb3: 0
            }
        },
        G1Point {
            x: u384 {
                limb0: 9099537023736262233172602062,
                limb1: 59035524850243130685672195412,
                limb2: 3720418929591387686,
                limb3: 0
            },
            y: u384 {
                limb0: 16009151850725489877364726844,
                limb1: 68147411821124653336812245689,
                limb2: 8719712422820849839,
                limb3: 0
            }
        }
    ]
        .span();
    let scalars: Span<u256> = array![
        3710402706614362650965231201153411908560522290699919894770557918477323515293,
        5755294491014690258504730856009929820120082910332770947687486205311634605038
    ]
        .span();

    let curve_index = 4;

    println!("yupi");

    return true;
}
